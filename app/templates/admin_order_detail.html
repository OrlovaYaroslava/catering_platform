{% extends "base.html" %}

{% block title %}–ó–∞–∫–∞–∑ ‚Ññ{{ order.id }}{% endblock %}

{% block content %}
<h2>–ó–∞–∫–∞–∑ ‚Ññ{{ order.id }}</h2>

<div class="card">
    <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ</h3>

    <p><strong>–ö–ª–∏–µ–Ω—Ç:</strong> {{ order.user.email }}</p>
    <p><strong>–î–∞—Ç–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è:</strong> {{ order.event_date }}</p>
    <p><strong>–í—Ä–µ–º—è:</strong> {{ order.event_time }}</p>
    <p><strong>–ê–¥—Ä–µ—Å:</strong> {{ order.address }}</p>
    <p><strong>–ì–æ—Å—Ç–µ–π:</strong> {{ order.guests_count }}</p>

    <p><strong>–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞:</strong>
        {% if order.status == "awaiting_payment" %}
            üïí –û–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã
        {% elif order.status == "paid" %}
            ‚úÖ –û–ø–ª–∞—á–µ–Ω
        {% else %}
            {{ order.status }}
        {% endif %}
    </p>
</div>

<div class="card">
    <h3>–°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞</h3>

    {% for item in items %}
        <p>
            {{ item.dish.name }} ‚Äî
            {{ item.quantity }} —à—Ç.
            ({{ item.price }} ‚ÇΩ)
        </p>
    {% endfor %}

    <p><strong>–ò—Ç–æ–≥–æ:</strong> {{ order.total_price }} ‚ÇΩ</p>
</div>

<div class="card">
    <h3>–û–ø–ª–∞—Ç–∞</h3>

    <p><strong>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã:</strong> {{ payment.method }}</p>

    <p><strong>–°—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞:</strong>
        {% if payment.status == "pending" %}
            üïí –û–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã
        {% elif payment.status == "success" %}
            ‚úÖ –û–ø–ª–∞—á–µ–Ω–æ
        {% elif payment.status == "failed" %}
            ‚ùå –û—à–∏–±–∫–∞
        {% endif %}
    </p>

    {% if payment.method == "invoice" and payment.status == "pending" %}
        <form method="POST"
              action="{{ url_for('main.admin_confirm_payment', order_id=order.id) }}">
            <button class="btn btn-success">
                ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É
            </button>
        </form>
    {% endif %}
</div>

<a class="btn btn-secondary"
   href="{{ url_for('main.admin_orders') }}">
    ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –∑–∞–∫–∞–∑–æ–≤
</a>

{% endblock %}
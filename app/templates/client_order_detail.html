{% extends "base.html" %}

{% block title %}Заказ №{{ order.id }}{% endblock %}

{% block content %}
<h2>Заказ №{{ order.id }}</h2>

<div class="card">
    <p><strong>Статус заказа:</strong> {{ order.status }}</p>
    <p><strong>Дата мероприятия:</strong> {{ order.event_date }}</p>
    <p><strong>Время:</strong> {{ order.event_time }}</p>
    <p><strong>Адрес:</strong> {{ order.address }}</p>
    <p><strong>Количество гостей:</strong> {{ order.guests_count }}</p>
</div>

<h3>Блюда</h3>

{% for item in items %}
    <div class="card">
        {{ item.dish.name }} — {{ item.quantity }} шт.
    </div>
{% else %}
    <p>Блюда отсутствуют</p>
{% endfor %}

<div class="card">
    <strong>Итого:</strong> {{ order.total_price }} ₽
</div>

<h3>Оплата</h3>

<div class="card">
    <p><strong>Статус оплаты:</strong> {{ payment.status }}</p>

    {% if payment.status == "pending" %}
        <a class="btn" href="{{ url_for('main.payment_page', order_id=order.id) }}">
            Перейти к оплате
        </a>
    {% elif payment.status == "success" %}
        <p>✅ Заказ оплачен</p>
    {% elif payment.status == "failed" %}
        <p>❌ Оплата отклонена</p>
        <a class="btn" href="{{ url_for('main.payment_page', order_id=order.id) }}">
            Попробовать снова
        </a>
    {% endif %}
</div>

<a class="btn btn-secondary" href="{{ url_for('main.client_dashboard') }}">
    ← Назад в кабинет
</a>

{% endblock %}
